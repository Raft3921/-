<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è¨­å®š - ãƒ©ãƒ•ãƒˆã®å†’é™º</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', 'Meiryo', sans-serif;
      background: #0a1b2a;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    .settings-container {
      background: white;
      color: #0a1b2a;
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #1a2a4f;
    }
    .setting-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
    }
    .setting-section h2 {
      margin-top: 0;
      color: #1a2a4f;
      border-bottom: 2px solid #4466ff;
      padding-bottom: 10px;
    }
    .setting-item {
      margin-bottom: 20px;
    }
    .setting-item label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #1a2a4f;
    }
    .setting-item input[type="range"] {
      width: 100%;
      margin: 10px 0;
    }
    .setting-item input[type="checkbox"] {
      margin-right: 10px;
    }
    .setting-item select {
      width: 100%;
      padding: 8px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }
    .value-display {
      background: #e9ecef;
      padding: 5px 10px;
      border-radius: 5px;
      display: inline-block;
      margin-left: 10px;
      font-weight: bold;
    }
    .buttons {
      text-align: center;
      margin-top: 30px;
    }
    button {
      background: #4466ff;
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      margin: 0 10px;
      font-weight: bold;
    }
    button:hover {
      background: #3355ee;
    }
    button.secondary {
      background: #6c757d;
    }
    button.secondary:hover {
      background: #5a6268;
    }
    .key-button {
      background: #f8f9fa;
      border: 2px solid #ddd;
      color: #1a2a4f;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      min-width: 60px;
      text-align: center;
      transition: all 0.2s;
    }
    .key-button:hover {
      background: #e9ecef;
      border-color: #4466ff;
    }
    .key-button.setting {
      background: #4466ff;
      color: white;
      border-color: #4466ff;
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .character-option {
      display: flex;
      align-items: center;
    }
    .character-option input[type="radio"] {
      display: none;
    }
    .character-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      background: #f8f9fa;
      min-width: 100px;
    }
    .character-label:hover {
      border-color: #4466ff;
      background: #e9ecef;
    }
    .character-option input[type="radio"]:checked + .character-label {
      border-color: #4466ff;
      background: #4466ff;
      color: white;
      transform: scale(1.05);
    }
    .character-label img {
      margin-bottom: 5px;
      image-rendering: pixelated;
    }
    .character-label span {
      font-size: 12px;
      font-weight: bold;
    }
  </style>
  <script src="assets-base64.js"></script>
</head>
<body>
  <div class="settings-container">
    <h1>è¨­å®š</h1>
    
    <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="message" style="position:fixed;top:10px;left:50%;transform:translateX(-50%);background:#fff;padding:8px 16px;border-radius:8px;color:#1a2a4f;display:none;z-index:9999;font-weight:bold"></div>
    
    <!-- ç”»é¢è¨­å®š -->
    <div class="setting-section">
      <h2>ç”»é¢è¨­å®š</h2>
      <div class="setting-item">
        <label>
          <input type="checkbox" id="fullscreen"> ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã§ãƒ—ãƒ¬ã‚¤
        </label>
      </div>
      <div class="setting-item">
        <label>ç”»é¢è§£åƒåº¦</label>
        <select id="resolution">
          <option value="auto">è‡ªå‹•ï¼ˆæ¨å¥¨ï¼‰</option>
          <option value="1024x640">1024x640</option>
          <option value="1280x800">1280x800</option>
          <option value="1920x1080">1920x1080</option>
        </select>
      </div>
      <div class="setting-item">
        <label>æç”»å“è³ª</label>
        <select id="renderQuality">
          <option value="1">æœ€é«˜ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</option>
          <option value="0.85">é«˜</option>
          <option value="0.7">ä¸­</option>
          <option value="0.55">ä½</option>
          <option value="0.4">æœ€å°</option>
        </select>
      </div>
    </div>

    <!-- ã‚«ãƒ¡ãƒ©è¨­å®š -->
    <div class="setting-section">
      <h2>ã‚«ãƒ¡ãƒ©è¨­å®š</h2>
      <div class="setting-item">
        <label>ã‚«ãƒ¡ãƒ©è¿½å¾“é€Ÿåº¦ <span class="value-display" id="cameraSpeedValue">0.1</span></label>
        <input type="range" id="cameraSpeed" min="0.05" max="0.2" step="0.01" value="0.1">
      </div>
      <div class="setting-item">
        <label>ã‚ºãƒ¼ãƒ å€ç‡ <span class="value-display" id="zoomValue">2.0</span></label>
        <input type="range" id="zoom" min="1.0" max="3.0" step="0.1" value="2.0">
      </div>
    </div>

    <!-- ã‚²ãƒ¼ãƒ è¨­å®š -->
    <div class="setting-section">
      <h2>ã‚²ãƒ¼ãƒ è¨­å®š</h2>
      <div class="setting-item">
        <label>åŠ¹æœéŸ³éŸ³é‡ <span class="value-display" id="sfxVolumeValue">50%</span></label>
        <input type="range" id="sfxVolume" min="0" max="100" value="50">
      </div>
      <div class="setting-item">
        <label>BGMéŸ³é‡ <span class="value-display" id="bgmVolumeValue">30%</span></label>
        <input type="range" id="bgmVolume" min="0" max="100" value="30">
      </div>
      <div class="setting-item">
        <label>é›£æ˜“åº¦</label>
        <select id="difficulty">
          <option value="easy">ç°¡å˜</option>
          <option value="normal" selected>æ™®é€š</option>
          <option value="hard">é›£ã—ã„</option>
        </select>
      </div>
    </div>

    <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¨­å®š -->
    <div class="setting-section">
      <h2>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¨­å®š</h2>
      <div class="setting-item">
        <label>ã‚²ãƒ¼ãƒ æ“ä½œã‚­ãƒ¼</label>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <div>
            <label style="font-size: 12px; color: #666;">å·¦ç§»å‹•</label>
            <button class="key-button" id="leftKey" data-action="setKey" data-key="left">A</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">å³ç§»å‹•</label>
            <button class="key-button" id="rightKey" data-action="setKey" data-key="right">D</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ã‚¸ãƒ£ãƒ³ãƒ—</label>
            <button class="key-button" id="jumpKey" data-action="setKey" data-key="jump">Space</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ãƒã‚·ã‚´ä¸Šæ˜‡</label>
            <button class="key-button" id="ladderUpKey" data-action="setKey" data-key="ladderUp">W</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ãƒã‚·ã‚´ä¸‹é™</label>
            <button class="key-button" id="downKey" data-action="setKey" data-key="down">S</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">åœæ­¢</label>
            <button class="key-button" id="stopKey" data-action="setKey" data-key="stop">Shift</button>
          </div>
        </div>
      </div>
      <div class="setting-item">
        <label>ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼æ“ä½œã‚­ãƒ¼</label>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <div>
            <label style="font-size: 12px; color: #666;">ã‚«ãƒ¡ãƒ©å·¦</label>
            <button class="key-button" id="editorLeftKey" data-action="setKey" data-key="editorLeft">A</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ã‚«ãƒ¡ãƒ©å³</label>
            <button class="key-button" id="editorRightKey" data-action="setKey" data-key="editorRight">D</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ã‚«ãƒ¡ãƒ©ä¸Š</label>
            <button class="key-button" id="editorUpKey" data-action="setKey" data-key="editorUp">W</button>
          </div>
          <div>
            <label style="font-size: 12px; color: #666;">ã‚«ãƒ¡ãƒ©ä¸‹</label>
            <button class="key-button" id="editorDownKey" data-action="setKey" data-key="editorDown">S</button>
          </div>
        </div>
      </div>
      <div class="setting-item">
        <button id="resetKeysBtn" class="secondary" style="font-size: 14px; padding: 8px 16px;">ã‚­ãƒ¼è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </div>

    <!-- ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®š -->
    <div class="setting-section">
      <h2>ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®š</h2>
      <div class="setting-item">
        <label>
          <input type="checkbox" id="showGrid" checked> ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
        </label>
      </div>
      <div class="setting-item">
        <label>
          <input type="checkbox" id="snapToGrid" checked> ã‚°ãƒªãƒƒãƒ‰ã«ã‚¹ãƒŠãƒƒãƒ—
        </label>
      </div>
    </div>

    <div class="buttons">
      <button id="saveBtn">ğŸ’¾ ä¿å­˜</button>
      <button id="resetBtn" class="secondary">ğŸ—‘ï¸ ãƒªã‚»ãƒƒãƒˆ</button>
      <button id="backBtn" class="secondary">ğŸ  æˆ»ã‚‹</button>
    </div>
  </div>

  <script>
    // è¨­å®šã®èª­ã¿è¾¼ã¿
    function loadSettings() {
      const settings = JSON.parse(localStorage.getItem('gameSettings') || '{}');
      
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
      const defaults = {
        fullscreen: false,
        resolution: 'auto',
        renderQuality: '1',
        cameraSpeed: 0.1,
        zoom: 2.0,
        sfxVolume: 50,
        bgmVolume: 30,
        difficulty: 'normal',
        showGrid: true,
        snapToGrid: true,
        character: 'raft'
      };

      // è¨­å®šã‚’é©ç”¨
      Object.keys(defaults).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
          if (element.type === 'checkbox') {
            element.checked = settings[key] !== undefined ? settings[key] : defaults[key];
          } else if (element.type === 'range') {
            element.value = settings[key] !== undefined ? settings[key] : defaults[key];
            updateRangeValue(key);
          } else {
            element.value = settings[key] !== undefined ? settings[key] : defaults[key];
          }
        }
      });

      // ã‚­ãƒ¼è¨­å®šã®èª­ã¿è¾¼ã¿
      loadKeySettings();
    }

    // ã‚­ãƒ¼è¨­å®šã®èª­ã¿è¾¼ã¿
    function loadKeySettings() {
      const keySettings = JSON.parse(localStorage.getItem('keySettings') || '{}');
      
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ¼è¨­å®š
      const defaultKeys = {
        left: 'a',
        right: 'd',
        jump: ' ',
        ladderUp: 'w',
        down: 's',
        stop: 'Shift',
        editorLeft: 'a',
        editorRight: 'd',
        editorUp: 'w',
        editorDown: 's'
      };

      // ã‚­ãƒ¼è¨­å®šã‚’é©ç”¨
      Object.keys(defaultKeys).forEach(key => {
        const button = document.getElementById(key + 'Key');
        if (button) {
          const legacyKey = (key === 'ladderUp') ? (keySettings.ladderUp || keySettings.up) : undefined;
          const savedKey = legacyKey || keySettings[key] || defaultKeys[key];
          button.textContent = getKeyDisplayName(savedKey);
          button.dataset.keyValue = savedKey;
        }
      });
    }

    // ã‚­ãƒ¼ã®è¡¨ç¤ºåã‚’å–å¾—
    function getKeyDisplayName(key) {
      const keyMap = {
        ' ': 'Space',
        'ArrowLeft': 'â†',
        'ArrowRight': 'â†’',
        'ArrowUp': 'â†‘',
        'ArrowDown': 'â†“',
        'Shift': 'Shift',
        'Control': 'Ctrl',
        'Alt': 'Alt',
        'Tab': 'Tab',
        'Enter': 'Enter',
        'Escape': 'Esc'
      };
      return keyMap[key] || key.toUpperCase();
    }

    // ã‚­ãƒ¼è¨­å®šãƒ¢ãƒ¼ãƒ‰
    let isSettingKey = false;
    let currentSettingButton = null;

    // ã‚­ãƒ¼è¨­å®šé–‹å§‹
    function startKeySetting(button) {
      if (isSettingKey) return;
      
      isSettingKey = true;
      currentSettingButton = button;
      
      // ä»–ã®ãƒœã‚¿ãƒ³ã®è¨­å®šãƒ¢ãƒ¼ãƒ‰ã‚’è§£é™¤
      document.querySelectorAll('.key-button').forEach(btn => {
        btn.classList.remove('setting');
      });
      
      // ç¾åœ¨ã®ãƒœã‚¿ãƒ³ã‚’è¨­å®šãƒ¢ãƒ¼ãƒ‰ã«
      button.classList.add('setting');
      button.textContent = 'ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„...';
      
      showMessage('ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„');
    }

    // ã‚­ãƒ¼è¨­å®šå®Œäº†
    function finishKeySetting(key) {
      if (!isSettingKey || !currentSettingButton) return;
      
      isSettingKey = false;
      currentSettingButton.classList.remove('setting');
      currentSettingButton.textContent = getKeyDisplayName(key);
      currentSettingButton.dataset.keyValue = key;
      currentSettingButton = null;
      
      showMessage('ã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ');
    }

    // ã‚­ãƒ¼è¨­å®šã®ä¿å­˜
    function saveKeySettings() {
      const keySettings = {};
      const keyButtons = document.querySelectorAll('.key-button');
      
      keyButtons.forEach(button => {
        const keyType = button.dataset.key;
        const keyValue = button.dataset.keyValue;
        if (keyType && keyValue) {
          keySettings[keyType] = keyValue;
        }
      });
      
      localStorage.setItem('keySettings', JSON.stringify(keySettings));
    }

    // ã‚­ãƒ¼è¨­å®šã®ãƒªã‚»ãƒƒãƒˆ
    function resetKeySettings() {
      if (confirm('ã‚­ãƒ¼è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
        localStorage.removeItem('keySettings');
        loadKeySettings();
        showMessage('ã‚­ãƒ¼è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸï¼');
      }
    }

    // ç¯„å›²ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºæ›´æ–°
    function updateRangeValue(id) {
      const element = document.getElementById(id);
      const valueElement = document.getElementById(id + 'Value');
      if (element && valueElement) {
        if (id === 'cameraSpeed') {
          valueElement.textContent = parseFloat(element.value).toFixed(2);
        } else if (id === 'zoom') {
          valueElement.textContent = parseFloat(element.value).toFixed(1);
        } else if (id === 'sfxVolume' || id === 'bgmVolume') {
          valueElement.textContent = element.value + '%';
        }
      }
    }

    // è¨­å®šã®ä¿å­˜
    function saveSettings() {
      const settings = {};
      const elements = ['fullscreen', 'resolution', 'renderQuality', 'cameraSpeed', 'zoom', 'sfxVolume', 'bgmVolume', 'difficulty', 'showGrid', 'snapToGrid', 'character'];
      
      elements.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          if (element.type === 'checkbox') {
            settings[id] = element.checked;
          } else if (element.type === 'radio') {
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®å ´åˆã¯é¸æŠã•ã‚ŒãŸå€¤ã‚’å–å¾—
            const selectedRadio = document.querySelector(`input[name="${id}"]:checked`);
            if (selectedRadio) {
              settings[id] = selectedRadio.value;
            }
          } else {
            settings[id] = element.value;
          }
        }
      });

      localStorage.setItem('gameSettings', JSON.stringify(settings));
      
      // ã‚­ãƒ¼è¨­å®šã‚‚ä¿å­˜
      saveKeySettings();
      
      showMessage('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
    }

    // è¨­å®šã®ãƒªã‚»ãƒƒãƒˆ
    function resetSettings() {
      if (confirm('è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
        localStorage.removeItem('gameSettings');
        loadSettings();
        showMessage('è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸï¼');
      }
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    document.addEventListener('DOMContentLoaded', () => {
      loadSettings();

      // ç¯„å›²ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºæ›´æ–°
      ['cameraSpeed', 'zoom', 'sfxVolume', 'bgmVolume'].forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('input', () => updateRangeValue(id));
        }
      });

      // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
      document.getElementById('saveBtn').onclick = saveSettings;
      document.getElementById('resetBtn').onclick = resetSettings;
      document.getElementById('backBtn').onclick = () => location.href = 'home.html';

      // ã‚­ãƒ¼è¨­å®šã‚¤ãƒ™ãƒ³ãƒˆ
      document.getElementById('resetKeysBtn').onclick = resetKeySettings;
      
      // ã‚­ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
      document.querySelectorAll('.key-button').forEach(button => {
        button.addEventListener('click', () => {
          startKeySetting(button);
        });
      });

      // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ
      document.addEventListener('keydown', (e) => {
        if (isSettingKey) {
          e.preventDefault();
          finishKeySetting(e.key);
        }
      });
    });

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºé–¢æ•°
    function showMessage(message) {
      const messageElement = document.getElementById('message');
      if (messageElement) {
        messageElement.textContent = message;
        messageElement.style.display = 'block';
        setTimeout(() => {
          messageElement.style.display = 'none';
        }, 3000);
      }
    }

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
    const characterAnimations = {
      raft: {
        idle: new Image(),
        run1: new Image(),
        run2: new Image()
      },
      mai: {
        idle: new Image(),
        run1: new Image(),
        run2: new Image()
      },
      tanutsuna: {
        idle: new Image(),
        run1: new Image(),
        run2: new Image()
      }
    };

    // ç”»åƒèª­ã¿è¾¼ã¿
    characterAnimations.raft.idle.src = window.ASSETS_BASE64["player.png"];
    characterAnimations.raft.run1.src = window.ASSETS_BASE64["player-run1.png"];
    characterAnimations.raft.run2.src = window.ASSETS_BASE64["player-run2.png"];

    characterAnimations.mai.idle.src = window.ASSETS_BASE64["mai.png"];
    characterAnimations.mai.run1.src = window.ASSETS_BASE64["mai-run1.png"];
    characterAnimations.mai.run2.src = window.ASSETS_BASE64["mai-run2.png"];

    characterAnimations.tanutsuna.idle.src = window.ASSETS_BASE64["tanutsuna.png"];
    characterAnimations.tanutsuna.run1.src = window.ASSETS_BASE64["tanutsuna-run1.png"];
    characterAnimations.tanutsuna.run2.src = window.ASSETS_BASE64["tanutsuna-run2.png"];

    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
    let animationFrame = 0;
    let animationTimer = 0;

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æç”»
    function drawCharacterAnimation(canvasId, characterName) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return;
      
      const ctx = canvas.getContext('2d');
      const images = characterAnimations[characterName];
      
      if (!images) return;
      
      // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // èµ°ã‚Šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰
      const frame = Math.floor(animationFrame / 10) % 2;
      const img = frame === 0 ? images.run1 : images.run2;
      
      if (img.complete && img.naturalWidth > 0) {
        // 64x64ã«æ‹¡å¤§æç”»
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      }
    }

    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
    function updateAnimations() {
      animationFrame++;
      
      // å„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æç”»
      drawCharacterAnimation('raftCanvas', 'raft');
      drawCharacterAnimation('maiCanvas', 'mai');
      drawCharacterAnimation('tanutsunaCanvas', 'tanutsuna');
      
      requestAnimationFrame(updateAnimations);
    }

    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
    updateAnimations();
  </script>
</body>
</html> 
